function setupGame(){players=$("#players-count").text(),undercover=$("#undercover-count").text(),keyword=language.words[generateRandomInt(0,language.words.length)],turns=[];let e=language.player;for(let t=1;t<=players;t++)t==players?turns.push({player:e+" "+t,under:!1,word:keyword,next:language.search}):turns.push({player:e+" "+t,under:!1,word:keyword,next:e+" "+(t+1)});let t=[];for(let e=0;e<undercover;e++){let r=!1,n=generateRandomInt(0,players);for(let u=0;u<t.length;u++)n===t[u]&&(r=!0,e--);r||t.push(n)}for(let e of t)turns[e].under=!0,turns[e].word=language.title;turns.push({player:language.decide+" ("+undercover+")",under:!1,word:"",next:"Terminar"});let r="SoluciÃ³n: "+turns[t[0]].player;for(let e=1;e<t.length;e++)r+=", "+turns[t[e]].player;turns.push({player:r,under:!1,word:keyword,next:"Repetir"})}function startGame(){currentTurn=0,makeTurn(),$("#wrapper").addClass("playing")}function makeTurn(){currentTurn==turns.length&&(setupGame(),currentTurn=0),$("#current-word .text").text(""),$("#current-word .text").removeClass("show");let e=turns[currentTurn];currentTurn===turns.length-2?$("#current-word").hide():($("#current-word").show(),currentTurn===turns.length-1&&$("#current-word .text").addClass("show"));let t=400;0===currentTurn&&(t=20),$("#play").animate({opacity:0},t,function(){$("#current-player").text(e.player),$("#current-word .text").text(e.word),$("#next-turn").text(e.next)}),setTimeout(function(){$("#play").animate({opacity:1},400)},t),currentTurn++}let language,players,undercover,keyword,currentTurn,turns=[];$(function(){$("#back-btn").on("click",function(e){$("#wrapper").removeClass("playing")}),$("#players-less").on("click",function(e){let t=$("#players-count").text();$("#players-count").text(Math.max(--t,1))}),$("#players-more").on("click",function(e){let t=$("#players-count").text();$("#players-count").text(Math.max(++t,1))}),$("#undercover-less").on("click",function(e){let t=$("#undercover-count").text(),r=$("#players-count").text();$("#undercover-count").text(Math.min(Math.max(--t,1),r-1))}),$("#undercover-more").on("click",function(e){let t=$("#undercover-count").text(),r=$("#players-count").text();$("#undercover-count").text(Math.min(Math.max(++t,1),Math.floor(r/2)))}),$("#play-btn").on("click",function(e){setupGame(),startGame()}),$("#toggle-word").on("click",function(e){$("#current-word .text").toggleClass("show")}),$("#next-turn").on("click",function(e){makeTurn()}),language=checkLanguage(),localize(language)});